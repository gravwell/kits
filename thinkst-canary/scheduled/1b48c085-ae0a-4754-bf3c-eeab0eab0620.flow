{"id":"gravwell@0.0.1","nodes":{"1":{"id":1,"name":"MacroGet","inputs":{"in":{"connections":[]}},"outputs":{"out":{"connections":[{"node":2,"input":"in","data":{}}]}},"data":{"macros":{"type":"Array","array_elements":[{"type":"Constant","value":"GRAVWELL_INSTANCE"},{"type":"Constant","value":"CANARY_ALERT_SENDER"},{"type":"Constant","value":"CANARY_ALERT_RECIPIENT"}]},"__meta":{"nickname":null,"notes":null,"inputs":[],"values":{"macros":[{"type":{"kind":"string"},"value":"GRAVWELL_INSTANCE"},{"type":{"kind":"string"},"value":"CANARY_ALERT_SENDER"},{"type":{"kind":"string"},"value":"CANARY_ALERT_RECIPIENT"}]}},"__disabled":{"type":"Constant","value":false}},"position":[144,-384]},"2":{"id":2,"name":"Template","inputs":{"in":{"connections":[{"node":1,"output":"out","data":{}}]}},"outputs":{"out":{"connections":[{"node":3,"input":"in","data":{}}]}},"data":{"template":{"type":"Constant","value":"<html>\n<head>\n  <style>\n    table, th, td {\n      border: 1px solid black;\n      border-collapse: collapse;\n      padding: 5px;\n    }\n    th {\n      background-color: #f2f2f2;\n    }\n    h2 {\n      text-align: center;\n      padding: 0px;\n    }\n    p {\n      padding-left: 10px;\n      font-size: 16px;\n    }\n  </style>\n</head>\n<body>\n  <table style=\"width:100%\">\n    <tr><th><h1>Alert Details</h1></th></tr>\n    <tr><td></td></tr>\n  </table>\n\n  <table style=\"width:100%\">\n    <tr>\n      <td style=\"width:25%\"><h2>Dispatcher Name:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/scheduler/{{ .event.Metadata.Dispatcher.ID }}\" target=\"_blank\">\n            {{ .event.Metadata.Dispatcher.Name }}\n          </a>\n        </p>\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Alert Name:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/alerts/{{ .event.Metadata.AlertID }}\" target=\"_blank\">\n            {{ .event.Metadata.AlertName }}\n          </a>\n        </p>\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Name:</h2></td>\n      <td><p>{{ .flow.Name }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Description:</h2></td>\n      <td><p>{{ .flow.Description }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Executed:</h2></td>\n      <td><p>{{ .flow.Executed }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Max Run Duration:</h2></td>\n      <td><p>{{ .flow.MaxRunDuration }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Event Created:</h2></td>\n      <td><p>{{ .event.Metadata.Created }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Event Contents:</h2></td>\n      <td>\n        {{- if .event.Contents }}\n        <table style=\"width:100%; border-collapse: collapse; font-size:16px;\">\n          <tr>\n            {{- range $key, $value := .event.Contents }}\n              <th style=\"border:1px solid black; padding:5px; background-color:#f2f2f2; text-align:left;\">{{ $key }}</th>\n            {{- end }}\n          </tr>\n          <tr>\n            {{- range $key, $value := .event.Contents }}\n              <td style=\"border:1px solid black; padding:5px; text-align:left;\">{{ $value }}</td>\n            {{- end }}\n          </tr>\n        </table>\n        {{- else }}\n        <p>No event contents available.</p>\n        {{- end }}\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Link to Results:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/search/{{ .event.Metadata.Dispatcher.SearchID }}\" target=\"_blank\">\n            Open Search\n          </a>\n        </p>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>"},"name":{"type":"Constant","value":"templateOutput"},"__meta":{"nickname":null,"notes":null,"inputs":[],"values":{"template":{"type":{"kind":"string:longtext"},"value":"<html>\n<head>\n  <style>\n    table, th, td {\n      border: 1px solid black;\n      border-collapse: collapse;\n      padding: 5px;\n    }\n    th {\n      background-color: #f2f2f2;\n    }\n    h2 {\n      text-align: center;\n      padding: 0px;\n    }\n    p {\n      padding-left: 10px;\n      font-size: 16px;\n    }\n  </style>\n</head>\n<body>\n  <table style=\"width:100%\">\n    <tr><th><h1>Alert Details</h1></th></tr>\n    <tr><td></td></tr>\n  </table>\n\n  <table style=\"width:100%\">\n    <tr>\n      <td style=\"width:25%\"><h2>Dispatcher Name:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/scheduler/{{ .event.Metadata.Dispatcher.ID }}\" target=\"_blank\">\n            {{ .event.Metadata.Dispatcher.Name }}\n          </a>\n        </p>\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Alert Name:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/alerts/{{ .event.Metadata.AlertID }}\" target=\"_blank\">\n            {{ .event.Metadata.AlertName }}\n          </a>\n        </p>\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Name:</h2></td>\n      <td><p>{{ .flow.Name }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Description:</h2></td>\n      <td><p>{{ .flow.Description }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Executed:</h2></td>\n      <td><p>{{ .flow.Executed }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Flow Max Run Duration:</h2></td>\n      <td><p>{{ .flow.MaxRunDuration }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Event Created:</h2></td>\n      <td><p>{{ .event.Metadata.Created }}</p></td>\n    </tr>\n\n    <tr>\n      <td><h2>Event Contents:</h2></td>\n      <td>\n        {{- if .event.Contents }}\n        <table style=\"width:100%; border-collapse: collapse; font-size:16px;\">\n          <tr>\n            {{- range $key, $value := .event.Contents }}\n              <th style=\"border:1px solid black; padding:5px; background-color:#f2f2f2; text-align:left;\">{{ $key }}</th>\n            {{- end }}\n          </tr>\n          <tr>\n            {{- range $key, $value := .event.Contents }}\n              <td style=\"border:1px solid black; padding:5px; text-align:left;\">{{ $value }}</td>\n            {{- end }}\n          </tr>\n        </table>\n        {{- else }}\n        <p>No event contents available.</p>\n        {{- end }}\n      </td>\n    </tr>\n\n    <tr>\n      <td><h2>Link to Results:</h2></td>\n      <td>\n        <p>\n          <a href=\"{{ .GRAVWELL_INSTANCE }}/search/{{ .event.Metadata.Dispatcher.SearchID }}\" target=\"_blank\">\n            Open Search\n          </a>\n        </p>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>"},"name":{"type":{"default":"templateOutput","kind":"string"},"value":"templateOutput"}}},"__disabled":{"type":"Constant","value":false}},"position":[368,-384]},"3":{"id":3,"name":"Email","inputs":{"in":{"connections":[{"node":2,"output":"out","data":{}}]}},"outputs":{"out":{"connections":[]}},"data":{"from":{"type":"Variable","value":"CANARY_ALERT_SENDER"},"to":{"type":"Array","array_elements":[{"type":"Variable","value":"CANARY_ALERT_RECIPIENT"}]},"cc":{"type":"Array","array_elements":[]},"bcc":{"type":"Array","array_elements":[]},"subject":{"type":"Variable","value":"flow.Name"},"body":{"type":"Variable","value":"templateOutput"},"attachment":{"type":"Array","array_elements":[]},"__meta":{"nickname":"Email Recipient","notes":null,"inputs":[],"values":{"from":{"type":{"kind":"variable"},"value":"CANARY_ALERT_SENDER"},"to":[{"type":{"kind":"variable"},"value":"CANARY_ALERT_RECIPIENT"}],"cc":[],"bcc":[],"subject":{"type":{"kind":"variable"},"value":"flow.Name"},"body":{"type":{"kind":"variable"},"value":"templateOutput"},"attachment":[]}},"__disabled":{"type":"Constant","value":false}},"position":[592,-384]}}}